flowchart LR
    subgraph "Desenvolvimento"
        DEV["ğŸ‘¨â€ğŸ’» Developer<br/>Feature Branch"]
    end

    subgraph "CI - Pull Request"
        PR["ğŸ“‹ Pull Request<br/>para main"] --> LINT["ğŸ” Lint<br/>ESLint + Prettier"]
        LINT --> TYPE["ğŸ“ Type Check<br/>TypeScript"]
        TYPE --> TEST["ğŸ§ª Testes<br/>UnitÃ¡rios"]
        TEST --> BUILD["ğŸ”¨ Build<br/>Turborepo"]
    end

    subgraph "CD - Staging"
        MERGE["âœ… Merge<br/>para main"] --> DEPLOY_S_FE["ğŸš€ Deploy Frontend<br/>Vercel (Staging)"]
        MERGE --> DEPLOY_S_BE["ğŸš€ Deploy Backend<br/>Fly.io (Staging)"]
        MERGE --> DEPLOY_S_WK["ğŸš€ Deploy Worker<br/>Fly.io (Staging)"]
        DEPLOY_S_FE --> INT_TEST["ğŸ§ª Testes de<br/>IntegraÃ§Ã£o"]
        DEPLOY_S_BE --> INT_TEST
        DEPLOY_S_WK --> INT_TEST
    end

    subgraph "CD - ProduÃ§Ã£o"
        TAG["ğŸ·ï¸ Tag Release<br/>vX.Y.Z"] --> APPROVE["ğŸ‘¤ AprovaÃ§Ã£o<br/>Manual"]
        APPROVE --> MIGRATE["ğŸ—„ï¸ MigraÃ§Ãµes<br/>de DB"]
        MIGRATE --> DEPLOY_P_FE["ğŸš€ Deploy Frontend<br/>Vercel (Prod)"]
        MIGRATE --> DEPLOY_P_BE["ğŸš€ Deploy Backend<br/>Fly.io (Prod)"]
        MIGRATE --> DEPLOY_P_WK["ğŸš€ Deploy Worker<br/>Fly.io (Prod)"]
    end

    DEV --> PR
    BUILD -->|"âœ… Sucesso"| MERGE
    INT_TEST -->|"âœ… Sucesso"| TAG

    style DEV fill:#4CAF50,color:#fff
    style APPROVE fill:#FF9800,color:#fff
    style DEPLOY_P_FE fill:#2196F3,color:#fff
    style DEPLOY_P_BE fill:#2196F3,color:#fff
    style DEPLOY_P_WK fill:#2196F3,color:#fff
